<ng-container *ngIf="isLoading">
    <div class="progress progress-modal">
        <div class="progress-bar progress-bar-striped progress-bar-animated bg-primary" role="progressbar" style="width: 100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>>
    </div>
</ng-container>

<div class="modal-content">
    <div class="modal-header">
        <div class="modal-title h4" id="example-modal-sizes-title-lg">
            <i class="icon-2x text-dark-50 flaticon-user-add mx-2"></i>Editar al Usuario {{ user_selected.name }}
        </div>
    </div>

    <div class="overlay overlay-block cursor-default modal-body" style="min-height: 404px">
        <ng-container *ngIf="isLoading$ | async">
            <div class="overlay-layer bg-transparent">
                <div class="spinner spinner-lg spinner-success"></div>
            </div>
        </ng-container>

        <form action="#" class="form form-label-right" [formGroup]="formGroup">
            <div class="form-group row">
                <div class="col-lg-6">
                    <label class="form-label">Nombres Completos: *</label>
                    <input type="text" class="form-control form-control-solid form-control-lg" name="name" placeholder="Ingrese un nombre" autocomplete="off" [class.is-invalid]="isControlInvalid('name')" [class.is-valid]="isControlValid('name')"  formControlName="name">

                    <div class="valid-feedback" *ngIf="isControlValid('name')">
                        El nombre se ingreso correctamente</div>
                    <div class="invalid-feedback" *ngIf="controlHasError('required', 'name')" >
                        Se requiere el nombre completo</div>    
                    <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'name')">
                        El nombre debe tener al menos tres letas</div>
                    <div class="invalid-feedback"  *ngIf="controlHasError('maxlength', 'name')">
                        El nombre debe tener un maximo de 100 letras</div>
                </div>
                <div class="col-lg-6">
                    <label class="form-label">Apellidos Completos: *</label>
                    <input type="text" class="form-control form-control-solid form-control-lg" name="surname" placeholder="Ingrese apellido" autocomplete="off" [class.is-invalid]="isControlInvalid('surname')" [class.is-valid]="isControlValid('surname')"  formControlName="surname">

                    <div class="valid-feedback" *ngIf="isControlValid('surname')">
                        El apellido se ingreso correctamente</div>
                    <div class="invalid-feedback" *ngIf="controlHasError('required', 'surname')" >
                        Se requiere el apellido completo</div>    
                    <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'surname')">
                        El apellido debe tener al menos tres letas</div>
                    <div class="invalid-feedback"  *ngIf="controlHasError('maxlength', 'surname')">
                        El apellido debe tener un maximo de 100 letras</div>
                </div>
            </div>
            <div class="form-group row justify-content-center">
                <div class="col-lg-6">
                    <label class="form-label">Correo Electronico: *</label>
                    <input type="email" class="form-control form-control-solid form-control-lg" name="email" placeholder="Ingrese correo" autocomplete="off" [class.is-invalid]="isControlInvalid('email')" [class.is-valid]="isControlValid('email')"  formControlName="email">

                    <div class="valid-feedback" *ngIf="isControlValid('email')">
                        El Correo se ingreso correctamente</div>
                    <div class="invalid-feedback" *ngIf="controlHasError('required', 'email')" >
                        Se requiere el Correo completo</div>    
                    <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'email')">
                        El Correo debe tener al menos tres letas</div>
                    <div class="invalid-feedback"  *ngIf="controlHasError('maxlength', 'email')">
                        El Correo debe tener un maximo de 100 letras</div>
                </div>

                <div class="col-lg-6">
                    <label class="form-label">Selec. Rol: *</label>
                    <select name="role_id" class="form-control form-control-solid form-control-lg" formControlName="role_id">
                        <option value="" >Ninguno</option>
                        <option value="1" >ADMINISTRADOR GENERAL</option>
                    </select>
                </div>
                
            </div>
            <div class="form-group row">
                <div class="col-lg-6">
                    <label class="form-label">Contraseña: *</label>
                    <input type="password" class="form-control form-control-solid form-control-lg" name="password" placeholder="Ingrese contraseña" autocomplete="off" [class.is-invalid]="isControlInvalid('password')" [class.is-valid]="isControlValid('password')"  formControlName="password">

                    <div class="valid-feedback" *ngIf="isControlValid('password')">
                        La contraseña se ingreso correctamente</div>
                    <div class="invalid-feedback" *ngIf="controlHasError('required', 'password')" >
                        Se requiere la contraseña completo</div>    
                    <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'password')">
                        La contraseña debe tener al menos tres letas</div>
                    <div class="invalid-feedback"  *ngIf="controlHasError('maxlength', 'password')">
                        La contraseña debe tener un maximo de 100 letras</div>
                </div>
                <div class="col-lg-6">
                    <label class="form-label">Repetir contraseña: *</label>
                    <input type="password" class="form-control form-control-solid form-control-lg" name="rpassword" placeholder="Repetir contraseña" autocomplete="off" [class.is-invalid]="isControlInvalid('rpassword')" [class.is-valid]="isControlValid('rpassword')"  formControlName="rpassword">

                    <div class="valid-feedback" *ngIf="isControlValid('rpassword')">
                        La contraseña se ingreso correctamente</div>
                    <div class="invalid-feedback" *ngIf="controlHasError('required', 'rpassword')" >
                        Se requiere la contraseña completo</div>    
                    <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'rpassword')">
                        La contraseña debe tener al menos tres letas</div>
                    <div class="invalid-feedback"  *ngIf="controlHasError('maxlength', 'rpassword')">
                        La contraseña debe tener un maximo de 100 letras</div>
                </div>

                <div class="col-lg-10">
                    <label class="form-label">Selec. Estado: *</label>
                    <select class="form-control form-control-solid form-control-lg" name="status" placeholder="Selec. el Estado" formControlName="state">
                        <option value="1">Activo</option>
                        <option value="2">Desactivo</option>
                    </select>
                </div>
            </div>

        </form>
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-light btn-elevate mr-2" (click)="modal.dismiss()">Cancel</button>
        <button type="submit" class="btn btn-primary btn-elevate mr-2" (click)="save()" [disabled]="formGroup.invalid">Guardar Cambios</button>
    </div>
</div>

  